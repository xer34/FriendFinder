<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Friendishster</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css"
      integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto"
      rel="stylesheet"
    />
    <style>
      body{
        font-family: 'Roboto', sans-serif;
      }
      #gradient {
        width: 100%;
        height: 100%;
        padding: 0px;
        margin: 0px;
      }
      img {
        width: 150px;
        height: 150px;
      }
    </style>
  </head>
  <body>
    <div id="gradient">
      <div class="container" style="max-width: 50%; background: transparent;">
        <h2>Survey Questions</h2>
        <hr />
        <h3>About You</h3>
        <h4>Name or Alias or XBOX Live Handle.</h4>
        <input type="text" id="name" class="form-control" required />
        <h4>
          Link to Photo Image. Any photo image. Doesn't even have to be you.
        </h4>
        <input type="text" id="photo" class="form-control" required />
        <hr />
        <h3><strong>Question 1</strong></h3>
        <h4>You injure yourself often, and typically in hilarious fashion.</h4>
        <select class="chosen-select" id="q1">
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option> </select
        ><br /><br />
        <h3><strong>Question 2</strong></h3>
        <h4>
          Generally speaking, most movies would be better if made into musicals.
        </h4>
        <select class="chosen-select" id="q2">
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option> </select
        ><br /><br />
        <h3><strong>Question 3</strong></h3>
        <h4>
          You find it would be easier to fight 10 duck sized horses than one
          horse sized duck.
        </h4>
        <select class="chosen-select" id="q3">
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option> </select
        ><br /><br />
        <h3><strong>Question 4</strong></h3>
        <h4>Fedoras are all around cool hats, regardless of the wearer.</h4>
        <select class="chosen-select" id="q4">
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option> </select
        ><br /><br />
        <h3><strong>Question 5</strong></h3>
        <h4>Inanimate objects upset you easily.</h4>
        <select class="chosen-select" id="q5">
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option> </select
        ><br /><br />
        <h3><strong>Question 6</strong></h3>
        <h4>
          When in other peoples homes, you go out of your way to do weird
          things.
        </h4>
        <select class="chosen-select" id="q6">
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option> </select
        ><br /><br />
        <h3><strong>Question 7</strong></h3>
        <h4>Children under 5 are generally scary and should not be trusted.</h4>
        <select class="chosen-select" id="q7">
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option> </select
        ><br /><br />
        <h3><strong>Question 8</strong></h3>
        <h4>You're filled with ridiculous facts and useless trivia.</h4>
        <select class="chosen-select" id="q8">
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option> </select
        ><br /><br />
        <h3><strong>Question 9</strong></h3>
        <h4>
          You have a job that is enjoyable, but is ultimately a waste of time
          and it serves no real purpose.
        </h4>
        <select class="chosen-select" id="q9">
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option> </select
        ><br /><br />
        <h3><strong>Question 10</strong></h3>
        <h4>
          Most cults start out as great ideas, and if they weren't so cult-ey,
          you would probably join one.
        </h4>
        <select class="chosen-select" id="q10">
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option> </select
        ><br /><br />
        <br />
        <br />
        <button
        data-toggle="modal"
        data-target="#exampleModal"
          type="submit"
          class="btn btn-danger btn-lg btn-block"
          id="submit"
        >
          </i> Submit
        </button>
        <hr />
      </div>
    </div>
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Bestest Match We Could Find!</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
    <!-------------------------------------------- silly things to follow  ------------------------------------------>
<script >var colors = new Array(
  [62, 35, 255],
  [60, 255, 60],
  [255, 35, 98],
  [45, 175, 230],
  [255, 0, 255],
  [255, 128, 0]
);
var step = 0;
var colorIndices = [0, 1, 2, 3];
var gradientSpeed = 0.002;
function updateGradient() {
  if ($ === undefined) return;
  var c0_0 = colors[colorIndices[0]];
  var c0_1 = colors[colorIndices[1]];
  var c1_0 = colors[colorIndices[2]];
  var c1_1 = colors[colorIndices[3]];
  var istep = 1 - step;
  var r1 = Math.round(istep * c0_0[0] + step * c0_1[0]);
  var g1 = Math.round(istep * c0_0[1] + step * c0_1[1]);
  var b1 = Math.round(istep * c0_0[2] + step * c0_1[2]);
  var color1 = "rgb(" + r1 + "," + g1 + "," + b1 + ")";
  var r2 = Math.round(istep * c1_0[0] + step * c1_1[0]);
  var g2 = Math.round(istep * c1_0[1] + step * c1_1[1]);
  var b2 = Math.round(istep * c1_0[2] + step * c1_1[2]);
  var color2 = "rgb(" + r2 + "," + g2 + "," + b2 + ")";
  $("#gradient")
    .css({
      background:
        "-webkit-gradient(linear, left top, right top, from(" +
        color1 +
        "), to(" +
        color2 +
        "))"
    })
    .css({
      background:
        "-moz-linear-gradient(left, " +
        color1 +
        " 0%, " +
        color2 +
        " 100%)"
    });
  step += gradientSpeed;
  if (step >= 1) {
    step %= 1;
    colorIndices[0] = colorIndices[1];
    colorIndices[2] = colorIndices[3];
    //pick two new target color indices
    //do not pick the same as the current one
    colorIndices[1] =
      (colorIndices[1] +
        Math.floor(1 + Math.random() * (colors.length - 1))) %
      colors.length;
    colorIndices[3] =
      (colorIndices[3] +
        Math.floor(1 + Math.random() * (colors.length - 1))) %
      colors.length;
  }
}
setInterval(updateGradient, 10);
</script>
    <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
      integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js"
      integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em"
      crossorigin="anonymous"
    ></script>
    <!-- ------------------------------------------ -->
<script type="text/javascript">
  $("#submit").on("click", function(event) {
    event.preventDefault();
    function validateForm() {
      var isValid = true;
      $(".form-control").each(function() {
        if ($(this).val() === "") {
          isValid = false;
        }
      });
      $(".chosen-select").each(function() {
        if ($(this).val() === "") {
          isValid = false;
        }
      });
      return isValid;
    }
    if (validateForm()) {
      var friends = {
        name: $("#name").val(),
        photo: $("#photo").val(),
        scores: [
          parseInt($("#q1").val(), 10),
          parseInt($("#q2").val(), 10),
          parseInt($("#q3").val(), 10),
          parseInt($("#q4").val(), 10),
          parseInt($("#q5").val(), 10),
          parseInt($("#q6").val(), 10),
          parseInt($("#q7").val(), 10),
          parseInt($("#q8").val(), 10),
          parseInt($("#q9").val(), 10),
          parseInt($("#q10").val(), 10)
        ]
      }
      $.post("/api/friends", friends,
      function(data) {
        console.log("Dude pushed to array")

          var yourCount = friends.scores
  console.log("your count: " + yourCount)
  var yourSum = (yourCount.reduce(getSum))
  console.log("your sum: " + yourSum)

})

        $.ajax({ url: "/api/friends", method: "GET" })
    .then(function(friendsArray) {
      var counts = []
  
        


      for (let i = 0; i < friendsArray.length; i++) {

  var friendArrayScores = friendsArray[i].scores;
  console.log(friendsArray[i].name + " :" + friendArrayScores)

  var friendArraySum = (friendArrayScores.reduce(getSum))
  console.log(friendsArray[i].name + " :" + friendArraySum)
  
counts.push(friendArraySum)
console.log(friendArraySum)


// var numbers = [1, 2, 3, 4];
// Math.max(...numbers) // 4
// Math.min(...numbers) // 1

// I tried -- could not figure out the logic for this problem

// currently it is able to add up the score from the options the user puts in HOWEVER it is storing it as strings, even when I'm parsingInt. Furthermore I need to be able to compare both scores, which I can do, but I do not know how to reference both the users and the stored scores to display the closest match THEN display that one. 
 


        var friendsArrayData = $(".modal-body");
        var listItem = $("<li class='list-group-item mt-4'>");
        listItem.append(
          $("<h2>").text("Name: " + (friendsArray[i].name)),
          $("<hr>"),
          $("<img>").attr("src", friendsArray[i].photo),
          $("<p>").text("Score: " + friendsArray[i].score)
        );
        friendsArrayData.append(listItem);
      }
      console.log("matches total score array: " + counts)
    });
    } else {
      alert("Please answer all of the silly questions please!");
    }
  });

  function getSum(total, num) {
  return total + num;
}


</script>
  </body>
</html>
